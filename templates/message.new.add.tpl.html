<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html><!-- InstanceBegin template="/Templates/template.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<link href="style.css" rel="stylesheet" type="text/css" >
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!-- InstanceBeginEditable name="doctitle" -->
<title>{$smarty.const.AUTORESPONDER}::{$smarty.const.TITLE_ADD_MESSAGE}</title>
<!-- InstanceEndEditable -->
<!-- InstanceBeginEditable name="head" -->
<link href="../style.css" rel="stylesheet" type="text/css">
<!-- InstanceEndEditable -->
</head>

<body>
<table width="100%"  border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td colspan="3">{include file="top.tpl.html"}</td>
  </tr>
  <tr>
    <td width="8%" valign="top">{include file="campaign.tpl.html"}</td>
    <td width="100%" valign="top" align="left"><table width="100%" align="center"  border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td>{include file="menu.tpl.html"}</td>
      </tr>
      <tr>
        <td height="27" align="center" valign="top"><!-- InstanceBeginEditable name="EditRegion3" -->
				   {literal}
				  <script  language="javascript" type="text/javascript">
		/*function isInteger(s)
			{
	            var i;
               for (i = 0; i < s.length; i++)
			   {   
               // Check that current character is number.
               var c = s.charAt(i);
                 if (i == 0) {
			       if (((c < "0") || (c > "9"))&&(c!=="-")) return false;
                 }else if(((c < "0") || (c > "9"))) return false;
			   }
			                 // All characters are numbers.
             return true;
           }*/
		   function isInteger(s)
			{
	            var i;
               for (i = 0; i < s.length; i++)
			   {   
               // Check that current character is number.
               var c = s.charAt(i);
               if (((c < "0") || (c > "9"))) return false;
               }
              // All ch  aracters are numbers.
             return true;
           }
	             function validateForm()
				  {
				      errmsg="";
				      if(document.add_message.txtdelay.value=="")
                       { 
                          {/literal}
                        errmsg=errmsg + "{$smarty.const.BLANK_NOT_ALLOWED_IN_DELAY}\n";
                          {literal}
                       }
					   if(!(isInteger(document.add_message.txtdelay.value)))
                          {    
                               {/literal}
                              errmsg= errmsg +  " {$smarty.const.INTEGER_IS_REQUIRED_IN_DELAY}\n";
                               {literal}
                           }
                   if(!(document.add_message.msg_formate[0].checked)&&(!(document.add_message.msg_formate[1].checked)))
                       { 
                          {/literal}
                           errmsg=errmsg + "{$smarty.const.BLANK_NOT_ALLOWED_IN_MESSAGE_FORMATE}\n";
                          {literal}
                       }
					  if(errmsg=="")
                       { 
							if((document.add_message.txtsubject.value=="")||(document.add_message.textbody.value==""))
				  			{
							   
								if((document.add_message.txtsubject.value=="")&&(document.add_message.textbody.value==""))
								    {    
       									{/literal}								
							    		if(confirm("{$smarty.const.EMPTY_SUBJECT_AND_EMPTY_BODY}"))
										{literal}
                                             {
											return true;
										}
										else
										{
										   return false;
										}
									}
								else
								{
								     if(document.add_message.txtsubject.value=="")
								      {        {/literal}      
											  if(confirm("{$smarty.const.EMPTY_SUBJECT}"))
												{literal}																							
											  {
											   return true;
											  }
											  else
											  {
											  return false;
											  }
									   }
								    else
								     {      {/literal}
										  if(confirm("{$smarty.const.EMPTY_BODY}"))
                                            {literal}
										  {
										   return true;
										  }
										  else
										  {
										  return false;
										  }
								      }
								  }
								}else
								  {
								  return true;
								  }
											  
						}else
	                    {
						alert(errmsg);
	                    return false; 
	                    }
					}	
					   
				 /* if(document.add_message.txtsubject.value=="")
				  {
				    "Do You Want To Leave Subject Field Empty.\n"))
				    subject_flag=1;
				 
					subject_flage=0;
				  }
				  if(document.add_message.textbody.value=="")
				  {
				    if(confirm("Do You Want To Send Empty Message."))
					body_flage=1;
					else 
					body_flage=0;
	              }
				  if(subject_flag==1 &&  body_flage==1)
				  return true;
				  else
				  return false;
				  */
				  
				
				
			function selectforsubject()
             {
              //alert(document.add_message.custom_fields.value);
			  document.add_message.txtsubject.value+=document.add_message.custom_fields.value;
              //document.add_message.action="view_all_subscribers.php";
              //sdocument.add_message.submit();
             }	


				function selectforbody()
             {
              document.add_message.textbody.value+=document.add_message.custom.value;
              //document.add_message.action="view_all_subscribers.php";
              //sdocument.add_message.submit();
             }	
				</script>
				{/literal}
          <form   name="add_message"action="{$message_queue}"  method="post" enctype="multipart/form-data" onSubmit="return validateForm();">
            <br>
            <table width="70%"  border="0" align="center" cellpadding="0" cellspacing="0">
              <tr>
                <td class="tblHead"><table width="100%"  border="0" align="center" cellpadding="2" cellspacing="1">
                  <tr>
                    <td bgcolor="#FFFFFF"><table width="100%" align="center" cellpadding="4"	 cellspacing="0">
                      <tr align="center" class="tblHead">
                        <td height="25" colspan="4"  class="tblborder" ><strong>{if $messagerow neq ""}{$smarty.const.EDIT_MESSAGE}{else}{$smarty.const.ADD_MESSAGES}{/if}</strong></td>
                      </tr>
                      <tr>
                        <td align="left"><div align="right"><font color="#000000">{$smarty.const.DELAY_LIST}</font></div></td>
                        <td valign="bottom" ><table width="100%"  border="0" align="center" cellpadding="0" cellspacing="0">
                          <tr>
                            <td width="70%" align="left" scope="row"><input name="txtdelay" type="text" id="txtdelay2" size="5"></td>
							
                            <td width="30%" nowrap><font color="#000000">{$smarty.const.INSERT_INTO_SUBJECT}</font>
                            </td>
                            <td width="30%"><select name="custom_fields" id="custom_fields"  onChange="javascript:selectforsubject();">
                              <option value="" selected>#Select Keyword#</option>
                              <option value="#Name#">#Name#</option>
                              <option value="#EmailId#">#EmailId#</option>
                              
							 
                              
                            </select></td>
                          </tr>
                        </table></td>
                      </tr>
                      <tr>
                        <td align="left"><div align="right"><font color="#000000">{$smarty.const.SUBJECT}</font></div></td>
                        <td align="left" ><div align="left">
                          <input type="text" name="txtsubject"  size="67" value="{$messagerow[2]}">
                        </div></td>
                      </tr>
                      <tr>
                        <td align="left"><div align="right"><font color="#000000">{$smarty.const.FORMATE}</font></div></td>
                        <td align="left"><table width="30%"  border="0" cellspacing="1" cellpadding="0">
                          <tr>
                            <td width="22%"  align="right">
                              <input name="msg_formate" type="radio" value="html">
                            </td>
                            <td width="13%" align="left"><font color="#000000">Html</font></td>
                            <td width="36%" align="right"><input name="msg_formate" type="radio" value="text"></td>
                            <td width="29%" align="left"><font color="#000000">Text</font></td>
                          </tr>
                        </table></td>
                        </tr>
                      <tr>
                        <td valign="top" align="left"><div align="left"></div></td>
                        <td><table width="100%"  border="0" cellspacing="0" cellpadding="0">
                          <tr>
                            <td align="right" scope="row"><font color="#000000">   {$smarty.const.INSERT_INTO_BODY} </font></td>
                            <td width="30%">
			                <select name="custom" id="custom" onChange="javascript:selectforbody();"> 
                              <option value="" selected>#Select Keyword#</option>
							  <option value="#Name#">#Name#</option>
							  <option value="#EmailId#">#EmailId#</option>
							
      		 </select></td>
                          </tr>
                        </table></td>
                      </tr>
                      <tr>
                        <td align="left" valign="top"><div align="right"><font color="#000000">{$smarty.const.BODY}</font></div>
                        <td> <textarea name="textbody" cols="50" rows="8" >{$messagerow[3]}</textarea></td>
                        </tr>
  {if $messagerow neq ""}
  <tr>
    <td align="left"><div align="right"><font color="#000000">{$smarty.const.UPLOADED_FILE}</font></div></td>
    <td><font color="#000000">{$messagerow[4]}</font></td>
  </tr>
  <input type="hidden" name="uploadedfile" value="{$messagerow[4]}" >
  {/if}
  <tr>
    <td align="left"><div align="right"><font color="#000000">{$smarty.const.FILE_TO_ATTACH}</font></div></td>
    <td><input type="file" name="msgfile"  size="54"></td>
  </tr>
  <tr>
    <td colspan="2" align="center" ><input name="savemsg" type="submit" id="savemsg"  value="{$smarty.const.SAVE_MESSAGE}">
        <input type="reset"  value="{$smarty.const.CANCEL_ALL}" name="reset"></td>
  </tr>
<tr>
<td colspan="2" align="center"><font color="#000000"><a href="message_queue.manage.php?sec=message_queue.manage"><img src="images/BACK.JPG" width="46" height="20" border="0"></a></font></td>
</tr>

                    </table></td>
                  </tr>
                </table></td>
              </tr>
            </table>
            <input type="hidden" name="mesageid" value="{$messagerow[0]}" >
			<input type="hidden" name="sec" value="message_queue.manage">
			<input type="hidden" name="cid" >
          </form>
          <p>&nbsp;</p>
          <p>&nbsp;</p>
          <p>&nbsp;</p>
        <!-- InstanceEndEditable --></td>
      </tr>
    </table></td>
    <td width="0%">&nbsp;</td>
  </tr>
  <tr>
    <td colspan="3">{include file="bottom.tpl.html"}</td>
  </tr>
</table>
</body>
<!-- InstanceEnd --></html>
